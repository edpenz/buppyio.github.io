<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>buppy file storage</title>

    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="/css/bootstrap-custom.css">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/doc.css">
  </head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">

        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar-overflow">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><b>buppy</b> file storage</a>
        </div>

        <div class="collapse navbar-collapse" id="bs-navbar-overflow">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/">About</a></li>
            <li><a href="/man/1/bpy">Docs</a></li>
            <li><a href="/">Download</a></li>
          </ul>

          <ul class="nav navbar-nav nav-secondary">
<li>
  <a class="sidebar-header" href=".bs-sidebar-1" data-toggle="collapse">Commands</a>
  <ul class="nav collapse bs-sidebar-1">
    <li><a href="/man/1/bpy">bpy</a></li>
    <li><a href="/man/1/bpy_browse">browse</a></li>
    <li><a href="/man/1/bpy_cat">cat</a></li>
    <li><a href="/man/1/bpy_cp">cp</a></li>
    <li><a href="/man/1/bpy_env">env</a></li>
    <li><a href="/man/1/bpy_gc">gc</a></li>
    <li><a href="/man/1/bpy_get">get</a></li>
    <li><a href="/man/1/bpy_hist">hist</a></li>
    <li><a href="/man/1/bpy_ls">ls</a></li>
    <li><a href="/man/1/bpy_mkdir">mkdir</a></li>
    <li><a href="/man/1/bpy_mv">mv</a></li>
    <li><a href="/man/1/bpy_put">put</a></li>
    <li><a href="/man/1/bpy_rm">rm</a></li>
    <li><a href="/man/1/bpy_tar">tar</a></li>
    <li><a href="/man/1/bpy_zip">zip</a></li>
  </ul>
</li>
<li>
  <a class="sidebar-header" href=".bs-sidebar-5" data-toggle="collapse">Internals</a>
  <ul class="nav collapse bs-sidebar-5">
    <li><a href="/man/5/bpy_bpack">bpack</a></li>
    <li><a href="/man/5/bpy_ebpack">ebpack</a></li>
    <li><a href="/man/5/bpy_fs">fs</a></li>
    <li><a href="/man/5/bpy_htree">htree</a></li>
    <li><a href="/man/5/bpy_key">key</a></li>
  </ul>
</li>
<li>
  <a class="sidebar-header" href=".bs-sidebar-7" data-toggle="collapse">Misc</a>
  <ul class="nav collapse bs-sidebar-7">
    <li><a href="/man/7/bpy_drive">drive</a></li>
    <li><a href="/man/7/bpy_environment">environment</a></li>
    <li><a href="/man/7/bpy_timespec">timespec</a></li>
  </ul>
</li>
          </ul>
        </div>

      </div>
    </nav>

    <div class="container">
      <div class="row">
        <nav class="sidebar sidebar-left col-sm-3 hidden-xs">
          <ul class="nav nav-secondary">
<li>
  <a class="sidebar-header" href=".bs-sidebar-1" data-toggle="collapse">Commands</a>
  <ul class="nav collapse bs-sidebar-1">
    <li><a href="/man/1/bpy">bpy</a></li>
    <li><a href="/man/1/bpy_browse">browse</a></li>
    <li><a href="/man/1/bpy_cat">cat</a></li>
    <li><a href="/man/1/bpy_cp">cp</a></li>
    <li><a href="/man/1/bpy_env">env</a></li>
    <li><a href="/man/1/bpy_gc">gc</a></li>
    <li><a href="/man/1/bpy_get">get</a></li>
    <li><a href="/man/1/bpy_hist">hist</a></li>
    <li><a href="/man/1/bpy_ls">ls</a></li>
    <li><a href="/man/1/bpy_mkdir">mkdir</a></li>
    <li><a href="/man/1/bpy_mv">mv</a></li>
    <li><a href="/man/1/bpy_put">put</a></li>
    <li><a href="/man/1/bpy_rm">rm</a></li>
    <li><a href="/man/1/bpy_tar">tar</a></li>
    <li><a href="/man/1/bpy_zip">zip</a></li>
  </ul>
</li>
<li>
  <a class="sidebar-header" href=".bs-sidebar-5" data-toggle="collapse">Internals</a>
  <ul class="nav collapse bs-sidebar-5">
    <li><a href="/man/5/bpy_bpack">bpack</a></li>
    <li><a href="/man/5/bpy_ebpack">ebpack</a></li>
    <li><a href="/man/5/bpy_fs">fs</a></li>
    <li><a href="/man/5/bpy_htree">htree</a></li>
    <li><a href="/man/5/bpy_key">key</a></li>
  </ul>
</li>
<li>
  <a class="sidebar-header" href=".bs-sidebar-7" data-toggle="collapse">Misc</a>
  <ul class="nav collapse bs-sidebar-7">
    <li><a href="/man/7/bpy_drive">drive</a></li>
    <li><a href="/man/7/bpy_environment">environment</a></li>
    <li><a href="/man/7/bpy_timespec">timespec</a></li>
  </ul>
</li>
          </ul>
        </nav>

        <article class="col-sm-9">
          <h1>gc</h1>
          <hr />

          <div class="pandoc-wrapper">
            <h1 id="name">Name</h1>
<p>bpy gc - garbage collect and reclaim unreachable space on the remote store.</p>
<h1 id="synopsis">Synopsis</h1>
<p>gc means garbage collection, this command is how space is reclaimed after files are rm'd using <a href="/man/1/bpy_rm.html">bpy_rm(1)</a> and the undo history is pruned used <a href="/man/1/bpy_hist.html">bpy_hist(1)</a>. During a garbage collection, the remote will block any updates to roots, and any attempt to start a second collection will cause the original collection to safely fail.</p>
<p>The gc command works by starting from the root and its history and traversing the data marking every chunk that is reachable. After the marking phase is completed, the gc will perform what is known as a 'sweep'. The sweep will traverse remote pack file indexes, fetching reachable data, and repacking it in new pack files with the garbage removed. Old pack files are only deleted once the new pack file is safely commited to disk storage, so disk usage may temporarily rise before the collection is completed.</p>
<p>Because each pack file uses a unique IV key in its encryption, reachable data must be downloaded and reuploaded, this process can take some time when there are large amounts of packfiles that have unreachable data. A collection can be canceled at any time and resuming will not need to reprocess all the same data because repacked files will be fully reachable.</p>
<p>The possibly slow speed of GC can be partially mitigated by utilizing a local bpy cache to completely remove the overhead of data fetching. Only the new pack data will be uploaded if the local cache has the needed data.</p>
<h1 id="usage">Usage</h1>
<p><code>$ bpy gc</code></p>
<h1 id="example">Example</h1>
<p>run the garbage collector</p>
<pre><code>$ bpy gc</code></pre>
<h1 id="see-also">SEE ALSO</h1>
<p><strong><a href="/man/1/bpy.html">bpy(1)</a></strong>, <strong><a href="/man/1/bpy_hist.html">bpy_hist(1)</a></strong></p>

          </div>
        </article>
      </div>
    </div>

    <footer class="footer">
      <div class="container">
        <p class="text-muted text-right">&copy; 2016 buppy.io</p>
      </div>
    </footer>
  </body>
</html>
